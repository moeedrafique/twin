{% extends 'base.htm' %}
{% load static %}
{% load widget_tweaks %}
{% load plotly_dash %}
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
</head>
<body>
{% block content %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<!-- Main-body start -->
<div class="main-body">
	<div class="page-wrapper">
		<!-- Page-header start --><!-- Page-header end -->

		<!-- Page-body start -->
		<div class="page-body">
			<div class="row">
				<div class="col-sm-12 col-md-12">
					<div class="card">
						<div class="ml-5 mt-3 mb-3">
							<h5><strong>Reporting</strong></h5>
						</div>
						<div class="col-lg-12 reports-hvac-en">
							<div class="row">
								<div class="col-lg-6 ">
									<ul class="d-flex">
										<li class="p-2 active">
											HVAC VENTS
										</li>
									</ul>
								</div>
							</div>
							<div class="reports-dropdown">
								<h5><strong>HVAC EVENTS</strong></h5>
								<form id="searchForm" method="post" data-rooms-url="{% url 'ajax_load_districts' %}" data-cities-url="{% url 'ajax_load_cities' %}">
									{% csrf_token %}
									<div class="col-lg-12 ml-0">
									<div class="row">
										<div class="col-lg-5">
											<div class="form-field mb-3 mt-3">
												<label for="password-input">Building</label>
												<select name="building" id="id_class_name">
													<option >Select Building</option>
													<option selected="All">All</option>
													{% for j in business_id_data %}

													<option value="{{ j }}">{{ j }}</option>

													{% endfor %}
												</select>
											</div>
											<div class="form-field mb-3 mt-3">
												<label for="password-input">Floor</label>
												<select name="floors" id="id_board" value="floors">
													<option  value="" selected>
														Select Floor
													</option>
												</select>
											</div>
											<div class="form-field mb-3 mt-3">
												<label for="password-input">From</label>
												<input name="from_date" type="date">

												</input>
											</div>
										</div>
										<div class="col-lg-2">

										</div>
										<div class="col-lg-5">
											<div class="form-field mb-3 mt-3">
												<label for="password-input">Room</label>
												<select name="rooms" id="id_rooms">
													<option value="" selected>
														Select Room
													</option>
												</select>
											</div>
											<div class="form-field mb-3 mt-3">
												<label for="password-input">Vents Location</label>
												<select name="vents">
													<option>
														All
													</option>
													<option>
														Fcu
													</option><option>
														Air Handling Unit
													</option><option>
														Supply Grill
													</option><option>
														Exit Grill
													</option>



												</select>
											</div>
											<div class="form-field mb-3 mt-3">
												<label for="password-input">To</label>
												<input name="to_date" type="date">

												</input>
											</div>
										</div>
									</div>

								</div>
									<div class="text-right">
									<button type="submit" class="btn">Generate Report</button>
								</div>
								</form>
							</div>
							<div class="mb-4"></div>
							<div class="col-sm-12">
                                                <!-- HTML5 Export Buttons table start -->
                                                <div class="card">
                                                    <div class="card-header table-card-header">
                                                        <h5>All Records</h5>
                                                        <div class="card-header-right">
                                                    <ul class="list-unstyled card-option">
                                                        <li><i class="feather icon-maximize full-card"></i></li>
                                                        <li><i class="feather minimize-card icon-minus"></i></li>
                                                        <li><i class="feather icon-trash-2 close-card"></i></li>
                                                    </ul>
                                                </div>
                                                    </div>
                                                    <div class="card-block">
                                                        <div class="dt-responsive table-responsive">
															{% if sim %}
                                                            <table id="basic-btn" class="table table-striped table-bordered nowrap">
                                                                <thead>
                                                                    <tr>
                                                                        <th>DateTime</th>
                                                                        <th>Business</th>
                                                                        <th>Buildings</th>
                                                                        <th>Floors</th>
                                                                        <th>Rooms</th>
                                                                        <th>AHU OUT</th>
                                                                        <th>eg1_1</th>
                                                                        <th>fcu_in</th>
                                                                        <th>main_door</th>
																		<th>sf1_2</th>
																		<th>sf2_2</th>
																		<th>sg1_1</th>
																		<th>sg2_2</th>
																		<th>sg3_2</th>
																		<th>sg4_2</th>
																		<th>sg5_2</th>
																		<th>sg6_2</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                {% for i in sim %}
                                                            <tr>
                                                                    <td>{{ i.timestamp }}</td>
                                                                    <td>{{ i.business }}</td>
                                                                    <td>{{ i.building }}</td>
                                                                    <td>{{ i.floor }}</td>
                                                                    <td>{{ i.room }}</td>
                                                                    <td>{{ i.data.ahu_out }}</td>
                                                                    <td>{{ i.data.eg1_1 }}</td>
                                                                    <td>{{ i.data.fcu_in }}</td>
                                                                    <td>{{ i.data.main_door }}</td>
                                                                    <td>{{ i.data.sf1_2 }}</td>
                                                                    <td>{{ i.data.sf2_2 }}</td>
                                                                    <td>{{ i.data.sg1_1 }}</td>
                                                                    <td>{{ i.data.sg2_2 }}</td>
                                                                    <td>{{ i.data.sg3_2 }}</td>
                                                                    <td>{{ i.data.sg4_2 }}</td>
                                                                    <td>{{ i.data.sg5_2 }}</td>
                                                                    <td>{{ i.data.sg6_2 }}</td>
                                                            </tr>
                                                            {% endfor %}
                                                        </tbody>
                                                            </table>
															{% elif sim2 %}
															<table id="basic-btn" class="table table-striped table-bordered nowrap">
                                                                <thead>
                                                                    <tr>
                                                                        <th>DateTime</th>
                                                                        <th>Business</th>
                                                                        <th>Buildings</th>
                                                                        <th>Floors</th>
                                                                        <th>Rooms</th>
                                                                        <th>AHU OUT</th>
                                                                        <th>eg1_1</th>
                                                                        <th>fcu_in</th>
                                                                        <th>main_door</th>
																		<th>sf1_2</th>
																		<th>sf2_2</th>
																		<th>sg1_1</th>
																		<th>sg2_2</th>
																		<th>sg3_2</th>
																		<th>sg4_2</th>
																		<th>sg5_2</th>
																		<th>sg6_2</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                {% for i in sim2 %}
                                                            <tr>
                                                                    <td>{{ i.timestamp }}</td>
                                                                    <td>{{ i.business }}</td>
                                                                    <td>{{ i.building }}</td>
                                                                    <td>{{ i.floor }}</td>
                                                                    <td>{{ i.room }}</td>
                                                                    <td>{{ i.data.ahu_out }}</td>
                                                                    <td>{{ i.data.eg1_1 }}</td>
                                                                    <td>{{ i.data.fcu_in }}</td>
                                                                    <td>{{ i.data.main_door }}</td>
                                                                    <td>{{ i.data.sf1_2 }}</td>
                                                                    <td>{{ i.data.sf2_2 }}</td>
                                                                    <td>{{ i.data.sg1_1 }}</td>
                                                                    <td>{{ i.data.sg2_2 }}</td>
                                                                    <td>{{ i.data.sg3_2 }}</td>
                                                                    <td>{{ i.data.sg4_2 }}</td>
                                                                    <td>{{ i.data.sg5_2 }}</td>
                                                                    <td>{{ i.data.sg6_2 }}</td>
                                                            </tr>
                                                            {% endfor %}
                                                        </tbody>
                                                            </table>
															{% endif %}
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- HTML5 Export Buttons end -->
                                            </div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<script>
                                        $("#id_class_name").change(function () {
                                          var url = $("#searchForm").attr("data-cities-url");
                                          var categoryId = $(this).val();

                                          $.ajax({
                                            url: url,
                                            data: {
                                              'category': categoryId
                                            },
                                            success: function (data) {
                                                console.log(data);
                                              $("#id_board").html(data);

                                            }

                                          });

                                        });
                                        $("#id_board").change(function () {
                                          var url = $("#searchForm").attr("data-rooms-url");
                                          var floorId = $(this).val();

                                          $.ajax({
                                            url: url,
                                            data: {
                                              'floor': floorId
                                            },
                                            success: function (data) {
                                                console.log(data);
                                              $("#id_rooms").html(data);

                                            }

                                          });

                                        });

                                      </script>
	<!-- Page-body end -->
</div>
</div>
{% endblock %}
</body>
</html>